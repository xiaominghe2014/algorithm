language: cpp
sudo: required
services:
        - docker
before_install:
        - docker build -t ximena-gcc-algorithm .
        - docker run --rm -v "$PWD":/usr/src/algorithm -w /usr/src/algorithm ximena-gcc-algorithm        
install:

 - make -f shCXX

script:
    - if [ "$CXX" = "g++" ]; then g++ --version; fi
    - if [ "$CXX" != "g++" ]; then clang++ --version; fi
    - make clean
    - make
    - ./algorithm

matrix:
  include:
  - os: linux
    env: PROJECT=xonotic OS="linux32"
    compiler: g++
  - os: linux
    env: PROJECT=xonotic OS="linux64"
    compiler: g++
  - os: linux
    env: PROJECT=xonotic OS="win32"
    compiler: g++
  - os: linux
    env: PROJECT=xonotic OS="win64"
    compiler: g++
  - os: osx
    env: PROJECT=xonotic OS="osx"
    compiler: clang++

branches:
 only:
 - master
notifacations:
 email: false
 irc:
 - "%{repository}/%{branch} (%{commit} - %{author}): %{build_url}: %{message}"
env:
 global:
 - LANG="en_US.UTF-8"
